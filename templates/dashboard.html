<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PMC Property List</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <header>
    <h1>PMC Property List</h1>
    <p>PMC ID: {{ pmc_id }}</p>
  </header>

  {% if request.query_params.get("status") == "success" %}
    <div role="alert" style="background-color: #d4edda; color: #155724; padding: 1rem; border-radius: 6px;">
      ✅ Your changes have been saved to GitHub.
    </div>
  {% elif request.query_params.get("status") == "error" %}
    <div role="alert" style="background-color: #f8d7da; color: #721c24; padding: 1rem; border-radius: 6px;">
      ❌ There was an error saving your changes.
    </div>
  {% endif %}

  <main>
    <h2>Your Properties</h2>

    {% if properties %}
      <section style="display: flex; flex-direction: column; gap: 2rem;">
        {% for prop in properties %}
          <article style="display: flex; align-items: flex-start; background: #f5f5f5; padding: 1rem; border-radius: 8px;">
            <img src="https://via.placeholder.com/120x90?text=Property"
                 alt="Image for {{ prop.property_name }}"
                 style="margin-right: 1rem; border-radius: 6px;">

            <div>
              <h3>{{ prop.property_name }}</h3>
              <p><strong>Status:</strong>
                {% if prop.sandy_enabled %}
                  <span style="color: green;">LIVE</span>
                {% else %}
                  <span style="color: red;">OFFLINE</span>
                {% endif %}
              </p>

              <a href="/admin/edit-file?file={{ prop.data_folder_path }}/config.json"
                 style="margin-right: 1rem; background-color: #007bff; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px;">
                Edit Config
              </a>

              <a href="/admin/edit-file?file={{ prop.data_folder_path }}/manual.txt"
                 style="background-color: #28a745; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px;">
                Edit Manual
              </a>
            </div>
          </article>
        {% endfor %}
      </section>
    {% else %}
      <p>No properties found for this PMC.</p>
    {% endif %}
  </main>

  <footer>
    <p><a href="/auth/logout">Log out</a></p>
  </footer>
</body>
</html>
