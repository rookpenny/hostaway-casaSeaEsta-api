<form onsubmit="event.preventDefault(); Upgrades.submit(this);" class="space-y-3">
  <input type="hidden" name="id" value="{{ upgrade.id if upgrade else '' }}">

  <!-- holds the final URL that will be saved -->
  <input type="hidden" name="image_url" value="{{ upgrade.image_url if upgrade else '' }}">

  <!-- holds the temp upload key returned by upload endpoint -->
  <input type="hidden" name="image_tmp_key" value="">

  <!-- ...property / slug / title... -->

  <div>
    <label class="text-xs font-semibold text-slate-600">Image</label>

    <div class="mt-1 flex items-center gap-2">
      <input
        type="file"
        accept="image/*"
        data-upgrade-image-file
        class="block w-full text-sm"
      />

      <button
        type="button"
        class="h-9 px-3 rounded-xl border border-slate-200 bg-white text-sm hover:bg-slate-50"
        data-upgrade-image-upload
      >
        Upload
      </button>

      <button
        type="button"
        class="h-9 px-3 rounded-xl border border-slate-200 bg-white text-sm hover:bg-slate-50"
        data-upgrade-image-clear
      >
        Remove
      </button>
    </div>

    <div class="mt-2">
      <img
        data-upgrade-image-preview
        src="{{ upgrade.image_url if upgrade and upgrade.image_url else '' }}"
        alt="Upgrade image"
        class="w-full rounded-xl border border-slate-200 object-cover {% if not (upgrade and upgrade.image_url) %}hidden{% endif %}"
        style="max-height:180px;"
      />
    </div>

    <div class="mt-1 text-xs text-slate-500">Used in guest UI / upsell cards.</div>
  </div>

  <!-- ...price / active / buttons... -->
</form>
