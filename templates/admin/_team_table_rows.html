{% for m in team_members %}
<tr class="border-b border-slate-100" data-member-row="{{ m.id }}">
  <td class="py-2 font-medium">{{ m.full_name or "—" }}</td>

  <td class="py-2 text-slate-600">
    <div class="flex items-center gap-2">
      <span>{{ m.email }}</span>
      {% if not m.last_login_at %}
        <span class="text-[11px] px-2 py-0.5 rounded-full border border-slate-200 bg-slate-50 text-slate-600 font-semibold">
          Invite pending
        </span>
      {% endif %}
    </div>
  </td>

  <td class="py-2">
    <select
      class="h-9 px-3 rounded-xl border border-slate-200 bg-white text-sm"
      data-member-role
      data-member-id="{{ m.id }}"
      data-original-role="{{ m.role }}"
      {% if m.email == user_email %}disabled{% endif %}
    >
      {% for r in ["owner","admin","staff","ops_manager","maintenance","cleaner","read_only"] %}
        <option value="{{ r }}" {% if m.role == r %}selected{% endif %}>{{ r }}</option>
      {% endfor %}
    </select>
  </td>

  <td class="py-2">
    {% if m.is_active %}
      <span class="text-xs font-semibold text-emerald-700" data-member-status>Active</span>
    {% else %}
      <span class="text-xs font-semibold text-rose-700" data-member-status>Disabled</span>
    {% endif %}
  </td>

  <td class="py-2 text-right">
    {% if m.email != user_email %}
      <button
        class="text-xs font-semibold hover:underline"
        data-member-toggle
        data-member-id="{{ m.id }}"
        data-next-active="{{ 'false' if m.is_active else 'true' }}"
      >
        {% if m.is_active %}Disable{% else %}Enable{% endif %}
      </button>
    {% else %}
      <span class="text-xs text-slate-400">—</span>
    {% endif %}
  </td>
</tr>
{% endfor %}

{% if not team_members %}
<tr>
  <td colspan="5" class="py-6 text-center text-slate-500">
    No team members yet.
  </td>
</tr>
{% endif %}
